<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»´æƒå¤§å†’é™©ï¼šå¥èº«æˆ¿è·‘è·¯ç¯‡</title>
    <style>
        :root {
            --primary-color: #3b82f6;
            --success-color: #22c55e;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --bg-color: #f3f4f6;
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --border-radius: 12px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none; /* Prevent text selection on mobile tap */
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            /* Simple pixel pattern background */
            background-image: radial-gradient(#d1d5db 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container {
            width: 100%;
            max-width: 420px; /* Mobile width constraint */
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            min-height: 750px; /* Increased height */
            display: flex;
            flex-direction: column;
        }

        /* Screens */
        .screen {
            display: none;
            flex-direction: column;
            padding: 24px;
            height: 100%;
            flex: 1;
            animation: fadeIn 0.3s ease-in-out;
            overflow-y: auto; /* Allow scrolling if content is long */
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Typography */
        h1 {
            font-size: 28px;
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: 800;
            text-shadow: 2px 2px 0px rgba(59, 130, 246, 0.2);
        }

        h2 {
            font-size: 18px;
            margin-bottom: 12px;
            color: #374151;
            font-weight: 700;
        }

        p {
            line-height: 1.5;
            margin-bottom: 16px;
            color: #4b5563;
            font-size: 15px;
        }

        /* Images */
        .game-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 16px;
            background-color: #e5e7eb;
            border: 2px solid #e5e7eb;
        }

        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.1s, filter 0.1s;
            text-align: center;
            text-decoration: none;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 0 #2563eb;
        }
        
        .btn-primary:active {
            box-shadow: 0 2px 0 #2563eb;
            transform: translateY(2px);
        }

        .btn-option {
            background-color: white;
            border: 2px solid #e5e7eb;
            color: #374151;
            text-align: left;
            position: relative;
            padding: 12px 16px;
            font-size: 14px;
            line-height: 1.4;
            font-weight: normal;
        }

        .btn-option:hover {
            border-color: var(--primary-color);
            background-color: #eff6ff;
        }

        .btn-option.selected {
            background-color: #eff6ff;
            border-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Stats Header */
        .stats-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
            background: #f8fafc;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 4px;
            display: flex;
            justify-content: space-between;
        }

        .stat-bar-bg {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s;
        }

        /* Ending Screen Styles */
        .ending-card {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
        }

        .ending-rank {
            font-size: 26px;
            color: var(--primary-color);
            font-weight: 900;
            display: block;
            margin: 10px 0;
        }

        .ending-badge {
            width: 80px;
            height: 80px;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 50%;
            font-size: 40px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .stat-summary {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 13px;
            color: #475569;
        }

        /* Footer */
        .footer {
            margin-top: auto;
            text-align: center;
            font-size: 12px;
            color: #9ca3af;
            padding-top: 20px;
        }

        #options-container {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <div style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center;">
                <img src="./assets/start.jpg" class="game-image" alt="Start Screen" style="height: auto; aspect-ratio: 16/9;" onerror="this.src='https://placehold.co/300x200/3b82f6/ffffff?text=ç»´æƒ+å¤§å†’é™©'">
                
                <h1>ç»´æƒå¤§å†’é™©</h1>
                <p style="text-align: center; font-size: 14px;">è€æ¿è·‘è·¯ï¼Œèµ„é‡‘è’¸å‘ã€‚<br>è¿™æ˜¯ä¸€åœºå…³ä¹é‡‘é’±ã€æ›´å…³ä¹ç²¾åŠ›çš„æŒä¹…æˆ˜ã€‚<br>ä½ éœ€è¦å¹³è¡¡<b>ä½“åŠ›</b>ä¸<b>è¯æ®</b>ï¼Œ<br>æ‰èƒ½èµ¢å¾—æœ€ç»ˆçš„èµ”å¿ã€‚</p>
                
                <div style="width: 100%; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="game.start()">å¼€å§‹ç»´æƒ</button>
                    <p style="font-size: 12px; text-align: center; margin-top: 10px; color: #9ca3af;">æœ¬æ¸¸æˆæƒ…èŠ‚çº¯å±è™šæ„<br>æ³•å¾‹ä¾æ®å‚è€ƒã€Šæ°‘æ³•å…¸ã€‹ã€Šæ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³•ã€‹</p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="header">
                <span class="level-badge" id="level-indicator">Level 1/10</span>
            </div>

            <!-- Stats Bar -->
            <div class="stats-header">
                <div class="stat-item">
                    <div class="stat-label">
                        <span>â¤ï¸ ä½“åŠ› (HP)</span>
                        <span id="hp-val">100</span>
                    </div>
                    <div class="stat-bar-bg">
                        <div class="stat-bar-fill" id="hp-bar" style="width: 100%; background-color: var(--success-color);"></div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">
                        <span>ğŸ“‚ è¯æ® (Evidence)</span>
                        <span id="ev-val">0</span>
                    </div>
                    <div class="stat-bar-bg">
                        <div class="stat-bar-fill" id="ev-bar" style="width: 0%; background-color: var(--primary-color);"></div>
                    </div>
                </div>
            </div>

            <h2 id="scenario-title">Level Title</h2>
            
            <img id="level-image" src="" class="game-image" alt="Scenario" onerror="this.src='https://placehold.co/600x400/e5e7eb/a3a3a3?text=No+Image'">

            <p id="scenario-text">Scenario description goes here...</p>

            <div id="options-container">
                <!-- Options will be injected here by JS -->
            </div>
        </div>

        <!-- Ending Screen -->
        <div id="ending-screen" class="screen">
            <div style="text-align: center;">
                <h1>æœ€ç»ˆåˆ¤å†³</h1>
                
                <div class="ending-card">
                    <div class="ending-badge" id="ending-icon">ğŸ†</div>
                    <p style="font-size: 14px; color: #64748b;">ä½ çš„ç»´æƒç»“å±€æ˜¯</p>
                    <span class="ending-rank" id="ending-rank">ç§°å·åç§°</span>
                    
                    <div class="stat-summary">
                        <span>â¤ï¸ å‰©ä½™ä½“åŠ›: <b id="end-hp">0</b></span>
                        <span>ğŸ“‚ è¯æ®å®Œæ•´åº¦: <b id="end-ev">0</b></span>
                    </div>

                    <p id="ending-desc" style="font-size: 14px; margin-top: 10px; color: #475569;">è¯„ä»·æè¿°</p>
                </div>

                <div style="background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 13px; text-align: left; border: 1px solid #e2e8f0;">
                    <strong>ğŸ’¡ å¾‹å¸ˆç‚¹è¯„ï¼š</strong>
                    <p id="ending-tip" style="margin-bottom: 0; margin-top: 5px;">...</p>
                </div>

                <!-- æ¨å¹¿åŒºåŸŸ -->
                <div style="margin-bottom: 25px; border-top: 1px dashed #cbd5e1; padding-top: 20px;">
                    <div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #bfdbfe;">
                        <h3 style="color: var(--primary-color); font-size: 16px; margin-bottom: 8px; display: flex; align-items: center; justify-content: center;">
                            ğŸ¤– æˆ‘çš„AIç»´æƒåŠ©æ‰‹
                        </h3>
                        <p style="font-size: 13px; color: #4b5563; margin-bottom: 12px; line-height: 1.4;">ç°å®ä¸­è¢«é¢„ä»˜åˆ¶è·‘è·¯äº†ï¼Ÿ<br>è®©é¢„ä»˜åˆ¶æ¶ˆè´¹ç»´æƒAIåŠ©æ‰‹å¸®ä½ è§£å†³é—®é¢˜ï¼</p>
                        <a href="https://www.coze.cn/store/agent/7587772694793027590?bot_id=true" target="_blank" style="display: block; background: var(--primary-color); color: white; padding: 10px 0; border-radius: 20px; text-decoration: none; font-size: 14px; font-weight: bold; box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3);">ğŸ‘‰ ç‚¹å‡»ç«‹å³å…è´¹ä½¿ç”¨</a>
                    </div>
                    
                    <div style="text-align: center;">
                        <p style="font-size: 13px; color: #64748b; margin-bottom: 5px;">å›åˆ°æˆ‘ä»¬çš„æ–‡ç« </p>
                        <a href="https://ä½ çš„å…¬ä¼—å·æ–‡ç« é“¾æ¥.com" target="_blank" style="color: var(--primary-color); font-weight: bold; text-decoration: none; font-size: 14px; border-bottom: 1px solid currentColor; padding-bottom: 1px;">ğŸ“„ é˜…è¯»å…¬ä¼—å·æ–‡ç« </a>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="game.reset()">é‡æ–°æŒ‘æˆ˜</button>
            </div>
        </div>
    </div>

    <script>
        // --- Game Content Data ---
        // ä¿®æ”¹å›¾ç‰‡è¯´æ˜ï¼š
        // 1. å°†ä½ çš„å›¾ç‰‡æ–‡ä»¶æ”¾å…¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„ assets ç›®å½•ä¸­
        // 2. ä¿®æ”¹ä¸‹æ–¹ levels æ•°ç»„ä¸­å¯¹åº”å…³å¡çš„ img å±æ€§ï¼Œä¾‹å¦‚ï¼šimg: "./assets/ä½ çš„å›¾ç‰‡å.jpg"
        // 3. å¦‚æœæ²¡æœ‰å›¾ç‰‡ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºé»˜è®¤çš„ç°è‰²å ä½å›¾
        
        // 10 Levels with HP and Evidence Mechanics
        // HP: Starts at 100. Reduced by bad choices or stress.
        // Evidence: Starts at 0. Gained by smart choices. Target 100.
        // Score: Hidden internal metric for logic correctness.
        const levels = [
            {
                id: 1,
                title: "ç¬¬ä¸€å…³ï¼šè‡´å‘½è¯±æƒ‘ (The Trap)",
                img: "./assets/level1.jpg", 
                scenario: "å¥èº«æˆ¿å‘¨å¹´åº†ï¼Œå¹´å¡ 1588 å…ƒï¼ˆåŸä»· 3000ï¼‰ã€‚åº—é•¿è¯´ï¼šâ€œè¿™æ˜¯é¿ç¨ä»·ï¼Œå¿…é¡»è½¬æˆ‘å¾®ä¿¡ï¼Œä¸èµ°å…¬è´¦ï¼Œåé¢æœ‰é™æ‰‹æ…¢æ— ï¼â€",
                options: [
                    { 
                        text: "ç«‹åˆ»è½¬è´¦ï¼ä¾¿å®œä¸å ç‹å…«è›‹ã€‚", 
                        effects: { score: 0, hp: 0, evidence: 5 },
                        desc: "ä½ æŠ¢åˆ°äº†ä¼˜æƒ ï¼Œä½†æ²¡æœ‰ä»»ä½•å‡­è¯ï¼Œå¿ƒæƒ…æ¿€åŠ¨ã€‚" 
                    },
                    { 
                        text: "è½¬è´¦ï¼Œä½†åœ¨å¤‡æ³¨é‡Œå†™ä¸Šâ€œxxå¥èº«æˆ¿å¹´å¡è´¹â€ã€‚", 
                        effects: { score: 0, hp: -5, evidence: 10 }, 
                        desc: "è™½ç„¶æœ‰å¤‡æ³¨ï¼Œä½†å¯¹æ–¹æ˜¯ä¸ªäººè´¦æˆ·ï¼Œæ³•å¾‹æ•ˆåŠ›å¾®å¼±ã€‚"
                    },
                    { 
                        text: "æ‹’ç»ç§è½¬ï¼ŒåšæŒåˆ·å¡å…¥å…¬è´¦ï¼Œå¹¶ç´¢è¦åˆåŒå‘ç¥¨ã€‚", 
                        effects: { score: 1, hp: -10, evidence: 20 },
                        desc: "ä¸ºäº†ç£¨è¿™ä»½åˆåŒï¼Œä½ å’Œåº—é•¿æ‰¯çš®äº†åŠå°æ—¶ï¼Œä½†è¿™æˆä¸ºäº†æœ€å¼ºè¯æ®ã€‚" // High Evidence, Low HP cost due to effort
                    },
                    { 
                        text: "è®©åº—é•¿å†™ä¸ªæ‰‹å†™æ”¶æ¡ï¼ŒæŒ‰ä¸ªæ‰‹å°ã€‚", 
                        effects: { score: 1, hp: -5, evidence: 10 },
                        desc: "æ”¶æ¡æœ‰ç‚¹ç”¨ï¼Œä½†å¯¹æ–¹å¦‚æœæ˜¯å‡åæˆ–ç¦»èŒå‘˜å·¥ï¼Œä½ å°±éº»çƒ¦äº†ã€‚"
                    }
                ]
            },
            {
                id: 2,
                title: "ç¬¬äºŒå…³ï¼šé—­åº—ç–‘äº‘ (The Sign)",
                img: "./assets/level2.jpg", 
                scenario: "è¿ç»­ä¸‰å¤©å¤§é—¨ç´§é—­ï¼Œè´´ç€â€œç”µè·¯æ£€ä¿®ï¼Œæš‚åœä¸€å‘¨â€ã€‚ä½ éšçº¦è§‰å¾—ä¸å¯¹åŠ²ã€‚",
                options: [
                    { 
                        text: "æ—¢ç„¶æœ‰å…¬å‘Šï¼Œå°±å†ç­‰ä¸€å‘¨çœ‹çœ‹ã€‚", 
                        effects: { score: 0, hp: 10, evidence: 0 },
                        desc: "ä½ é€‰æ‹©äº†ç›¸ä¿¡ï¼Œå›å®¶èººå¹³ï¼Œé”™è¿‡äº†é»„é‡‘å–è¯æœŸã€‚"
                    },
                    { 
                        text: "æ‹ç…§ç•™å­˜ï¼Œç«‹åˆ»å»ç‰©ä¸šæ‰“å¬æ°´ç”µè´¹ç¼´çº³æƒ…å†µã€‚", 
                        effects: { score: 1, hp: -10, evidence: 15 },
                        desc: "ä½ è·‘ä¸Šè·‘ä¸‹ï¼Œå¾—çŸ¥å¥èº«æˆ¿å·²æ¬ è´¹ä¸‰ä¸ªæœˆï¼Œå¿ƒä¸­è­¦é“ƒå¤§ä½œã€‚"
                    },
                    { 
                        text: "åœ¨ä¼šå‘˜ç¾¤é‡Œé—®é—®å¤§å®¶ï¼Œå¤§å®¶ä¸åŠ¨æˆ‘ä¸åŠ¨ã€‚", 
                        effects: { score: 0, hp: 10, evidence: 0 },
                        desc: "ç¾¤é‡Œè°£è¨€å››èµ·ï¼Œä½ è¶Šçœ‹è¶Šç„¦è™‘ï¼Œä½†æ²¡æœ‰ä»»ä½•å®é™…è¡ŒåŠ¨ã€‚"
                    },
                    { 
                        text: "ç ´é—¨è€Œå…¥ï¼Œæ¬ä¸ªå“‘é“ƒå›å®¶æ­¢æŸã€‚", 
                        effects: { score: 0, hp: -20, evidence: -10 }, // Illegal action reduces evidence credibility
                        desc: "ä½ å› æ¶‰å«Œç ´åå…¬ç§è´¢ç‰©è¢«ä¿å®‰æ‰£ä¸‹ï¼Œä¸ä»…æ²¡æ‹¿å›é’±ï¼Œè¿˜èµ”äº†é—¨é”é’±ã€‚"
                    }
                ]
            },
            {
                id: 3,
                title: "ç¬¬ä¸‰å…³ï¼šé»„é‡‘æ—¶é—´ (The Panic)",
                img: "./assets/level3.jpg", 
                scenario: "ç¡®è®¤è·‘è·¯ï¼ä¼šå‘˜ç¾¤ç‚¸äº†ï¼Œæœ‰äººå–Šâ€œå»æ¬ä¸œè¥¿â€ï¼Œæœ‰äººåœ¨éª‚è¡—ã€‚åœºé¢æåº¦æ··ä¹±ã€‚",
                options: [
                    { 
                        text: "å†²è¿›å»æŠ¢å€¼é’±çš„å™¨æ¢°ï¼", 
                        effects: { score: 0, hp: -30, evidence: -20 },
                        desc: "ä½ åœ¨ä¸€ç‰‡æ··æˆ˜ä¸­è¢«æ¨å€’å—ä¼¤ï¼Œè¿˜è¢«åæ¥èµ¶åˆ°çš„è­¦å¯Ÿç™»è®°åœ¨æ¡ˆï¼Œå¾—ä¸å¿å¤±ã€‚"
                    },
                    { 
                        text: "ç«™åœ¨é—¨å£æ‹è§†é¢‘å‘æŠ–éŸ³ï¼Œè¯•å›¾æ›å…‰ã€‚", 
                        effects: { score: 0, hp: -10, evidence: 5 },
                        desc: "ä½ å‘äº†è§†é¢‘ï¼Œè·å¾—äº†ä¸€äº›ç‚¹èµï¼Œä½†å¯¹è¿½å›é’±æ¬¾å¸®åŠ©æœ‰é™ã€‚"
                    },
                    { 
                        text: "å†·é™æ•´ç†åˆåŒã€ä»˜æ¬¾è®°å½•ï¼Œå»æ´¾å‡ºæ‰€æŠ¥æ¡ˆã€‚", 
                        effects: { score: 1, hp: -10, evidence: 20 },
                        desc: "åœ¨åˆ«äººæŠ¢ä¸œè¥¿æ—¶ï¼Œä½ å®Œæˆäº†è¯æ®å›ºåŒ–ã€‚è™½ç„¶æ’é˜ŸæŠ¥æ¡ˆå¾ˆç´¯ï¼Œä½†å€¼å¾—ã€‚"
                    },
                    { 
                        text: "æ‰¾å‡ ä¸ªå£®æ±‰ï¼Œå»è€æ¿å®¶é‡Œå µäººã€‚", 
                        effects: { score: 0, hp: -20, evidence: 0 },
                        desc: "ä½ ä»¬æ‰‘äº†ä¸ªç©ºï¼Œè¿˜åœ¨å°åŒºé—¨å£å’Œä¿å®‰åµäº†ä¸€æ¶ï¼Œç²¾ç–²åŠ›å°½ã€‚"
                    }
                ]
            },
            {
                id: 4,
                title: "ç¬¬å››å…³ï¼šç«‹æ¡ˆé£æ³¢ (The Police)",
                img: "./assets/level4.jpg", 
                scenario: "æ´¾å‡ºæ‰€æ°‘è­¦è¡¨ç¤ºè¿™æ˜¯â€œç»æµçº çº·â€ï¼Œä¸äºˆç«‹æ¡ˆï¼Œå»ºè®®å»æ³•é™¢èµ·è¯‰ã€‚",
                options: [
                    { 
                        text: "å¤§é—¹æ´¾å‡ºæ‰€ï¼Œä¸ç«‹æ¡ˆä¸èµ°ï¼", 
                        effects: { score: 0, hp: -20, evidence: 0 },
                        desc: "ä½ çš„æƒ…ç»ªå¤±æ§äº†ï¼Œè¢«æ°‘è­¦å£å¤´è­¦å‘Šï¼Œæ°”å¾—èƒƒç–¼ã€‚"
                    },
                    { 
                        text: "æ—¢ç„¶è­¦å¯Ÿä¸ç®¡ï¼Œé‚£å°±è‡ªè®¤å€’éœ‰å§ã€‚", 
                        effects: { score: 0, hp: +20, evidence: 0 }, 
                        endGame: true,
                        endGameType: 'early_giveup',
                        desc: "ä½ å†³å®šä¸å†çº ç»“ï¼Œè™½ç„¶é’±æ²¡äº†ï¼Œä½†å¿ƒæƒ…çªç„¶è½»æ¾äº†è®¸å¤šã€‚"
                    },
                    { 
                        text: "ç´¢è¦ã€Šä¸äºˆç«‹æ¡ˆé€šçŸ¥ä¹¦ã€‹ï¼Œè½¬å¤´å»æ³•é™¢ã€‚", 
                        effects: { score: 1, hp: -10, evidence: 10 },
                        desc: "è™½ç„¶å¤šè·‘äº†ä¸€è¶Ÿè…¿ï¼Œä½†ä½ æ‹¿åˆ°äº†å…³é”®çš„ç¨‹åºæ–‡ä»¶ã€‚"
                    },
                    { 
                        text: "è°ç§°è€æ¿è¯ˆéª—å‡ ä¸ªäº¿ï¼Œè¯•å›¾é—¹å¤§ã€‚", 
                        effects: { score: 0, hp: -10, evidence: -20 },
                        desc: "è°æŠ¥æ¡ˆæƒ…è¢«è¯†ç ´ï¼Œä½ çš„è¯šä¿¡åº¦åœ¨æ°‘è­¦å¿ƒä¸­å¤§æ‰“æŠ˜æ‰£ã€‚"
                    }
                ]
            },
            {
                id: 5,
                title: "ç¬¬äº”å…³ï¼šç»´æƒè”ç›Ÿ (The Alliance)",
                img: "./assets/level5.jpg", 
                scenario: "ç¾¤é‡Œæœ‰â€œå¤§å“¥â€è¯´è®¤è¯†å¾‹å¸ˆï¼Œæ¯äººäº¤ 200 å…ƒâ€œå»ºæ¡£è´¹â€å°±èƒ½é›†ä½“è¯‰è®¼ã€‚",
                options: [
                    { 
                        text: "å¤§å®¶éƒ½äº¤äº†ï¼Œæˆ‘ä¹Ÿäº¤ã€‚", 
                        effects: { score: 0, hp: -5, evidence: 5 }, // Gained some group evidence but lost money
                        desc: "ä½ è½¬äº†é’±ï¼Œè™½ç„¶å¤§å®¶æš‚æ—¶å›¢ç»“åœ¨äº†ä¸€èµ·ï¼Œä½†ä½ æ€»è§‰å¾—å“ªé‡Œä¸å¯¹åŠ²ã€‚"
                    },
                    { 
                        text: "ç§èŠå¤§å“¥ï¼Œå‘çº¢åŒ…æ±‚å…³ç…§ã€‚", 
                        effects: { score: 0, hp: -5, evidence: 0 },
                        desc: "ä½ ä¸ä»…æŸå¤±äº†å»ºæ¡£è´¹ï¼Œè¿˜å¤šæ­è¿›å»ä¸€ä¸ªçº¢åŒ…ï¼Œå¤§å“¥åªæ˜¯å›äº†ä¸ªè¡¨æƒ…åŒ…ã€‚"
                    },
                    { 
                        text: "æŸ¥éªŒå¾‹å¸ˆè¯ä»¶å’Œå§”æ‰˜åˆåŒï¼Œå¦åˆ™ä¸äº¤ã€‚", 
                        effects: { score: 1, hp: -5, evidence: 10 },
                        desc: "ä½ æ•é”åœ°è¯†ç ´äº†éª—å±€ï¼ˆæˆ–ç¡®è®¤äº†çœŸä¼ªï¼‰ï¼Œä¿ä½äº†é’±åŒ…å’Œè¯æ®ã€‚"
                    },
                    { 
                        text: "ç›´æ¥é€€ç¾¤ï¼Œè°ä¹Ÿä¸ä¿¡ã€‚", 
                        effects: { score: 1, hp: +10, evidence: -5 }, // Restored HP by ignoring noise
                        desc: "ä½ é€€å‡ºäº†ç¾¤èŠï¼Œè™½ç„¶æ¸…å‡€äº†ï¼Œä½†ä¹Ÿå¤±å»äº†è·å–é›†ä½“è¯æ®çš„æ¸ é“ã€‚"
                    }
                ]
            },
            {
                id: 6,
                title: "ç¬¬å…­å…³ï¼šå’Œè§£è¯±æƒ‘ (The Offer)",
                img: "./assets/level6.jpg", 
                scenario: "è€æ¿å¾‹å¸ˆè”ç³»ä½ ï¼šâ€œé€€ 15% ç°é‡‘äº†ç»“ï¼Œæˆ–è€…è½¬å»éƒŠåŒºå¥èº«æˆ¿ã€‚â€æ­¤æ—¶ä½ å·²èº«å¿ƒä¿±ç–²ã€‚",
                options: [
                    { 
                        text: "åšå†³ä¸è¦ï¼æˆ‘è¦å…¨é¢é€€æ¬¾ï¼Œæ­»ç£•åˆ°åº•ï¼", 
                        effects: { score: 1, hp: -20, evidence: 0 },
                        desc: "ä½ æ‹’ç»äº†å’Œè§£ã€‚è™½ç„¶æ°”åŠ¿å¾ˆè¶³ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€æ¼«é•¿çš„è¯‰è®¼é©¬æ‹‰æ¾å¼€å§‹äº†ã€‚"
                    },
                    { 
                        text: "æ¥å— 15% ç°é‡‘ï¼Œè½è¢‹ä¸ºå®‰ã€‚", 
                        effects: { score: 1, hp: +30, evidence: 0 },
                        endGame: true,
                        endGameType: 'early_settlement',
                        desc: "ä½ æ‹¿åˆ°äº†é’±ï¼Œè™½ç„¶ä¸å¤šï¼Œä½†é‚£ç§æ‚¬ç€çš„å¿ƒç»ˆäºæ”¾ä¸‹äº†ã€‚ä½“åŠ›å¤§å¹…æ¢å¤ï¼"
                    },
                    { 
                        text: "æ¥å—è½¬åº—æ–¹æ¡ˆã€‚", 
                        effects: { score: 1, hp: -5, evidence: 0 },
                        desc: "ä½ å»éƒŠåŒºçœ‹äº†çœ‹ï¼Œé‚£å®¶åº—ä¹Ÿå¾ˆç ´ï¼Œæ„Ÿè§‰éšæ—¶ä¼šå€’é—­ã€‚"
                    },
                    { 
                        text: "å‡è£…åŒæ„ï¼Œæ‹¿åˆ°é’±å†åæ‚”ã€‚", 
                        effects: { score: 0, hp: -10, evidence: -5 },
                        desc: "ç­¾ç½²äº†å’Œè§£åè®®å…·æœ‰æ³•å¾‹æ•ˆåŠ›ï¼Œåæ‚”å¾ˆéš¾ï¼Œä½ åªæ˜¯åœ¨æŠ˜è…¾è‡ªå·±ã€‚"
                    }
                ]
            },
            {
                id: 7,
                title: "ç¬¬ä¸ƒå…³ï¼šè¯‰è®¼ä¸»ä½“ (The Target)",
                img: "./assets/level7.jpg", 
                scenario: "èµ·è¯‰è°ï¼Ÿå…¬ç« æ˜¯â€œè…¾é£å…¬å¸â€ï¼Œé—¨å¤´æ˜¯â€œé˜¿è¯ºå¾·é“é¦†â€ï¼Œæ”¶æ¬¾äººæ˜¯â€œç‹äºŒéº»å­â€ã€‚",
                options: [
                    { 
                        text: "å‘Šâ€œé˜¿è¯ºå¾·é“é¦†â€ã€‚", 
                        effects: { score: 0, hp: -10, evidence: 5 },
                        desc: "ç«‹æ¡ˆè¢«é©³å›ï¼Œå› ä¸ºæ‹›ç‰Œä¸æ˜¯æ³•å¾‹ä¸»ä½“ï¼Œä½ ç™½è·‘äº†ä¸€è¶Ÿæ³•é™¢ã€‚"
                    },
                    { 
                        text: "å‘Šâ€œç‹äºŒéº»å­â€ã€‚", 
                        effects: { score: 0, hp: -10, evidence: 5 },
                        desc: "ç‹äºŒéº»å­åªæ˜¯å‘˜å·¥ï¼Œå‘Šä»–ä¸»ä½“ä¸é€‚æ ¼ï¼Œåˆè¦é‡æ–°å‡†å¤‡ææ–™ã€‚"
                    },
                    { 
                        text: "å‘Šâ€œè…¾é£å…¬å¸â€ã€‚", 
                        effects: { score: 1, hp: -5, evidence: 10 },
                        desc: "ç²¾å‡†æ‰“å‡»ï¼ä½ å‡†ç¡®é”å®šäº†è¢«å‘Šï¼Œç«‹æ¡ˆæˆåŠŸã€‚"
                    },
                    { 
                        text: "å…¨å†™ä¸Šï¼Œæ³•å®˜å¸®æˆ‘æŒ‘ã€‚", 
                        effects: { score: 0, hp: -10, evidence: 0 },
                        desc: "æ³•å®˜è®©ä½ å›å»ä¿®æ”¹è¯‰çŠ¶ï¼Œæ˜ç¡®è¢«å‘Šï¼Œä½ åˆæµªè´¹äº†ä¸€å¤©ã€‚"
                    }
                ]
            },
            {
                id: 8,
                title: "ç¬¬å…«å…³ï¼šç¼ºå¸­å®¡åˆ¤ (The Absence)",
                img: "./assets/level8.jpg", 
                scenario: "å¼€åº­äº†ï¼Œè€æ¿æ²¡æ¥ã€‚æ³•å®˜é—®ä½ æ˜¯å¦æ„¿æ„è°ƒè§£ã€‚",
                options: [
                    { 
                        text: "åŒæ„è°ƒè§£ï¼Œä»¥å’Œä¸ºè´µã€‚", 
                        effects: { score: 0, hp: -5, evidence: 0 },
                        desc: "è¢«å‘Šéƒ½æ²¡æ¥ï¼Œè°ƒè§£ä¸ªå¯‚å¯ï¼Ÿæ³•å®˜çœ‹ä½ çš„çœ¼ç¥å……æ»¡äº†æ— å¥ˆã€‚"
                    },
                    { 
                        text: "ä¸åŒæ„è°ƒè§£ï¼Œè¯·æ±‚ç¼ºå¸­åˆ¤å†³ã€‚", 
                        effects: { score: 1, hp: -5, evidence: 10 },
                        desc: "å¹²è„†åˆ©è½ï¼ç¨‹åºç»§ç»­æ¨è¿›ï¼Œè·ç¦»èƒœè¯‰åˆè¿‘äº†ä¸€æ­¥ã€‚"
                    },
                    { 
                        text: "è¯·æ±‚æš‚åœï¼Œç­‰æŠ“åˆ°è€æ¿å†è¯´ã€‚", 
                        effects: { score: 0, hp: -10, evidence: 0 },
                        desc: "è¿™ä¸€ç­‰å°±æ˜¯é¥é¥æ— æœŸï¼Œä½ çš„æ¡ˆå­è¢«æç½®äº†ã€‚"
                    },
                    { 
                        text: "ç”³è¯·å½“åº­é€®æ•è€æ¿ã€‚", 
                        effects: { score: 0, hp: -5, evidence: 0 },
                        desc: "è¿™æ˜¯æ°‘äº‹æ³•åº­ï¼Œä¸æ˜¯åˆ‘äº‹æ³•åº­ï¼Œä½ çš„è¯·æ±‚æ— æ³•æ»¡è¶³ã€‚"
                    }
                ]
            },
            {
                id: 9,
                title: "ç¬¬ä¹å…³ï¼šå¼ºåˆ¶æ‰§è¡Œ (The Enforcement)",
                img: "./assets/level9.jpg", 
                scenario: "èƒœè¯‰ï¼ä½†è€æ¿åä¸‹æ— è´¢äº§ã€‚æ­¤æ—¶ä½ éå¸¸ç–²æƒ«ã€‚",
                options: [
                    { 
                        text: "ç”³è¯·â€œç»ˆæœ¬â€ï¼Œä»¥åå†è¯´ã€‚", 
                        effects: { score: 1, hp: +10, evidence: 10 }, 
                        endGame: true,
                        endGameType: 'early_giveup',
                        desc: "æ¡ˆä»¶æš‚æ—¶ç»ˆç»“ï¼Œä½ ç»ˆäºå¯ä»¥ä¼‘æ¯äº†ï¼Œè™½ç„¶é’±è¿˜æ²¡æ‹¿å›æ¥ï¼Œä½†ç”Ÿæ´»è¿˜è¦ç»§ç»­ã€‚"
                    },
                    { 
                        text: "ç”³è¯·é™åˆ¶é«˜æ¶ˆè´¹ï¼Œåˆ—å…¥å¤±ä¿¡åå•ã€‚", 
                        effects: { score: 1, hp: -10, evidence: 10 },
                        desc: "ä½ å¡«äº†ä¸€å †è¡¨æ ¼ï¼Œè™½ç„¶ç´¯ï¼Œä½†ç»™è€æ¿å¥—ä¸Šäº†ç´§ç®å’’ã€‚"
                    },
                    { 
                        text: "å¤©å¤©å»æ³•é™¢å µæ³•å®˜ã€‚", 
                        effects: { score: 0, hp: -20, evidence: 5 },
                        desc: "æ³•å®˜ä¹Ÿå¾ˆæ— å¥ˆï¼Œä½ çš„æ­»ç¼ çƒ‚æ‰“åªæ¶ˆè€—äº†ä½ è‡ªå·±çš„ç²¾åŠ›ã€‚"
                    },
                    { 
                        text: "æ‰¾è®¨å€ºå…¬å¸æ³¼æ²¹æ¼†ã€‚", 
                        effects: { score: 0, hp: -20, evidence: -20 },
                        desc: "ä½ å› å¯»è¡…æ»‹äº‹è¢«æ‹˜ç•™ï¼Œç»´æƒè€…å˜æˆäº†è¿æ³•è€…ã€‚"
                    }
                ]
            },
            {
                id: 10,
                title: "ç¬¬åå…³ï¼šåˆºç ´é¢çº± (The Pierce)",
                img: "./assets/level10.jpg", 
                scenario: "ç»ˆæçº¿ç´¢ï¼šå‘ç°è€æ¿ç”¨å…¬å¸é’±ç»™è€å©†ä¹°è±ªè½¦ã€‚ä½ è¿˜æœ‰æœ€åä¸€ç‚¹åŠ›æ°”ã€‚",
                options: [
                    { 
                        text: "å¤ªç´¯äº†ï¼Œç®—äº†ï¼Œè‡ªè®¤å€’éœ‰ã€‚", 
                        effects: { score: 0, hp: 0, evidence: 0 },
                        desc: "åœ¨é»æ˜å‰ï¼Œä½ é€‰æ‹©äº†æ”¾å¼ƒã€‚"
                    },
                    { 
                        text: "ç”³è¯·è¿½åŠ è‚¡ä¸œå¤«å¦»ä¸ºè¢«æ‰§è¡Œäººï¼", 
                        effects: { score: 2, hp: -20, evidence: 20 }, // High effort
                        desc: "è¿™æ˜¯æœ€åä¸€åšï¼ä½ æœé›†è¯æ®ï¼Œæäº¤ç”³è¯·ï¼Œè€—å°½äº†æœ€åä¸€ç‚¹åŠ›æ°”ï¼Œä½†ç›´å‡»è¦å®³ï¼"
                    },
                    { 
                        text: "å»å·è±ªè½¦æŠµå€ºã€‚", 
                        effects: { score: 0, hp: -20, evidence: -50 },
                        desc: "è¿™æ˜¯çŠ¯ç½ªï¼ä½ çš„ç»´æƒä¹‹è·¯ä»¥è¿›çœ‹å®ˆæ‰€å‘Šç»ˆã€‚"
                    },
                    { 
                        text: "ä¸¾æŠ¥å·ç¨æ¼ç¨å¨èƒä»–ã€‚", 
                        effects: { score: 1, hp: -10, evidence: 15 },
                        desc: "è¿™æ‹›å¯èƒ½æœ‰ç”¨ï¼Œä½†ä¹Ÿæ¶‰å«Œæ•²è¯ˆå‹’ç´¢ï¼Œé£é™©æå¤§ã€‚"
                    }
                ]
            }
        ];

        // --- Game Logic ---
        const game = {
            currentLevelIndex: 0,
            stats: {
                score: 0,
                hp: 100,
                evidence: 0
            },
            
            elements: {
                startScreen: document.getElementById('start-screen'),
                gameScreen: document.getElementById('game-screen'),
                endingScreen: document.getElementById('ending-screen'),
                
                levelIndicator: document.getElementById('level-indicator'),
                hpVal: document.getElementById('hp-val'),
                hpBar: document.getElementById('hp-bar'),
                evVal: document.getElementById('ev-val'),
                evBar: document.getElementById('ev-bar'),
                
                scenarioTitle: document.getElementById('scenario-title'),
                scenarioText: document.getElementById('scenario-text'),
                levelImage: document.getElementById('level-image'),
                optionsContainer: document.getElementById('options-container'),

                endingRank: document.getElementById('ending-rank'),
                endingDesc: document.getElementById('ending-desc'),
                endingIcon: document.getElementById('ending-icon'),
                endingTip: document.getElementById('ending-tip'),
                endHp: document.getElementById('end-hp'),
                endEv: document.getElementById('end-ev')
            },

            start() {
                this.currentLevelIndex = 0;
                this.stats = { score: 0, hp: 100, evidence: 0 };
                this.updateStatsUI();
                this.switchScreen('gameScreen');
                this.loadLevel();
            },

            updateStatsUI() {
                // HP Styling
                this.elements.hpVal.textContent = this.stats.hp;
                this.elements.hpBar.style.width = `${Math.max(0, Math.min(100, this.stats.hp))}%`;
                if (this.stats.hp > 50) this.elements.hpBar.style.backgroundColor = 'var(--success-color)';
                else if (this.stats.hp > 20) this.elements.hpBar.style.backgroundColor = 'var(--warning-color)';
                else this.elements.hpBar.style.backgroundColor = 'var(--error-color)';

                // Evidence Styling
                this.elements.evVal.textContent = this.stats.evidence;
                this.elements.evBar.style.width = `${Math.max(0, Math.min(100, this.stats.evidence))}%`;
            },

            loadLevel() {
                const level = levels[this.currentLevelIndex];
                
                this.elements.levelIndicator.textContent = `Level ${this.currentLevelIndex + 1}/${levels.length}`;
                this.elements.scenarioTitle.textContent = level.title;
                this.elements.scenarioText.textContent = level.scenario;
                this.elements.levelImage.src = level.img;
                
                this.elements.optionsContainer.innerHTML = '';
                
                level.options.forEach((opt, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-option';
                    btn.innerHTML = `<b>${String.fromCharCode(65 + index)}.</b> ${opt.text}`;
                    btn.onclick = () => this.checkAnswer(index, btn);
                    this.elements.optionsContainer.appendChild(btn);
                });
            },

            checkAnswer(optionIndex, btnElement) {
                const level = levels[this.currentLevelIndex];
                const choice = level.options[optionIndex];
                
                // Apply Effects
                this.stats.score += choice.effects.score;
                this.stats.hp += choice.effects.hp;
                this.stats.evidence += choice.effects.evidence;
                
                // Cap values
                if (this.stats.hp < 0) this.stats.hp = 0;
                if (this.stats.evidence < 0) this.stats.evidence = 0;
                if (this.stats.evidence > 100) this.stats.evidence = 100;

                this.updateStatsUI();

                // Visual Feedback
                const allBtns = this.elements.optionsContainer.children;
                for (let b of allBtns) {
                    b.disabled = true;
                    if (b === btnElement) {
                        b.classList.add('selected');
                    }
                }

                // Check for HP Collapse
                if (this.stats.hp <= 0) {
                    setTimeout(() => {
                        this.showEnding(true); // true = collapsed
                    }, 800);
                    return;
                }

                // Check for Early Exit
                if (choice.endGame) {
                    setTimeout(() => {
                        this.showEnding(false, choice.endGameType);
                    }, 800);
                    return;
                }

                setTimeout(() => {
                    this.nextLevel();
                }, 500);
            },

            nextLevel() {
                this.currentLevelIndex++;
                if (this.currentLevelIndex < levels.length) {
                    this.loadLevel();
                } else {
                    this.showEnding(false);
                }
            },

            showEnding(isCollapsed, specialEndingType = null) {
                this.switchScreen('endingScreen');
                
                let rank, desc, icon, tip;
                const { score, hp, evidence } = this.stats;

                this.elements.endHp.textContent = hp;
                this.elements.endEv.textContent = evidence;

                if (isCollapsed) {
                    rank = "ç§°å·ï¼šè¿‡åŠ³çš„æ–—å£«";
                    desc = "é•¿æœŸçš„ç„¦è™‘ã€å¥”æ³¢å’Œæ— æ•ˆæ²Ÿé€šå½»åº•å‡»å®äº†ä½ ã€‚ä½ ç”Ÿäº†ä¸€åœºå¤§ç—…ï¼ŒåŒ»è¯è´¹æ¯”å¥èº«å¡è¿˜è´µã€‚ç»´æƒè™½ç„¶é‡è¦ï¼Œä½†èº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ã€‚";
                    icon = "ğŸš‘";
                    tip = "ç»´æƒæ˜¯ä¸€åœºæŒä¹…æˆ˜ï¼Œä¿æŒæƒ…ç»ªç¨³å®šæœ€é‡è¦ã€‚é‡åˆ°æ­»èƒ¡åŒåŠæ—¶æ­¢æŸï¼Œä¹Ÿæ˜¯ä¸€ç§æ™ºæ…§ã€‚";
                } else if (specialEndingType === 'early_giveup') {
                    rank = "ç§°å·ï¼šä½›ç³»è·¯äºº";
                    desc = "ä½ é€‰æ‹©äº†æ”¾è¿‡è‡ªå·±ã€‚è™½ç„¶æŸå¤±äº†é‡‘é’±ï¼Œä½†ä½ ä¿æŠ¤äº†è‡ªå·±çš„æƒ…ç»ªå’Œç²¾åŠ›ã€‚ç”Ÿæ´»ä¸åªæœ‰ç»´æƒï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹ã€‚åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œä½ ä¹Ÿæ˜¯èµ¢å®¶ã€‚";
                    icon = "ğŸ§˜";
                    tip = "å­¦ä¼šæ”¾ä¸‹æ˜¯ä¸€ç§ä¿®è¡Œã€‚ä¸å…¶åœ¨æ— æœ›çš„çº çº·ä¸­æ¶ˆè€—ç”Ÿå‘½ï¼Œä¸å¦‚è½¬èº«æŠ•å…¥æ–°çš„ç”Ÿæ´»ã€‚";
                } else if (specialEndingType === 'early_settlement') {
                    rank = "ç§°å·ï¼šåŠ¡å®çš„ç”Ÿå­˜è€…";
                    desc = "ä½ æ¥å—äº†ä¸å®Œç¾çš„èµ”å¿æ–¹æ¡ˆã€‚è™½ç„¶åªæ‹¿å›äº†ä¸€éƒ¨åˆ†é’±ï¼Œä½†ä½ é¿å…äº†æ¼«é•¿çš„è¯‰è®¼å’Œå·¨å¤§çš„ç²¾åŠ›æ¶ˆè€—ã€‚åœ¨è¿™ä¸ªå¤æ‚çš„ç¤¾ä¼šé‡Œï¼Œä½ æ‡‚å¾—æƒè¡¡åˆ©å¼Šï¼Œè½è¢‹ä¸ºå®‰ã€‚";
                    icon = "ğŸ¤";
                    tip = "æ³•å¾‹ä¸ä¿æŠ¤èººåœ¨æƒåˆ©ä¸Šç¡è§‰çš„äººï¼Œä½†ä¹Ÿä¸é¼“åŠ±ä¸ºäº†å°åˆ©è€—å°½ä¸€ç”Ÿã€‚å¦¥åæ˜¯æˆå¹´äººä¸–ç•Œçš„å¿…ä¿®è¯¾ã€‚";
                } else if (evidence < 40) {
                    rank = "ç§°å·ï¼šæ— åŠ©çš„å‘å–Šè€…";
                    desc = "ä½ è·‘äº†å¾ˆå¤šåœ°æ–¹ï¼Œä¹Ÿè€—è´¹äº†ä¸å°‘ç²¾åŠ›ï¼Œä½†å› ä¸ºç¼ºä¹æ ¸å¿ƒè¯æ®ï¼ˆå¦‚åˆåŒã€æµæ°´ï¼‰ï¼Œæ³•é™¢é©³å›äº†ä½ çš„è¯‰æ±‚ã€‚è€æ¿å°±åœ¨é‚£é‡Œï¼Œä½†ä½ æ‹¿ä»–æ²¡åŠæ³•ã€‚";
                    icon = "ğŸ¤·";
                    tip = "æ‰“å®˜å¸å°±æ˜¯æ‰“è¯æ®ã€‚æ²¡æœ‰ä¹¦é¢è¯æ®ï¼Œäº‹å®å†æ¸…æ¥šä¹Ÿå¯èƒ½è´¥è¯‰ã€‚æ—¥å¸¸æ¶ˆè´¹ä¿ç•™å‡­è¯æ˜¯å…³é”®ã€‚";
                } else if (score >= 5 && evidence >= 80) {
                    if (hp > 40) {
                        rank = "ç§°å·ï¼šç»´æƒæˆ˜ç¥";
                        desc = "å®Œç¾çš„ç»´æƒï¼ä½ ä¸ä»…æ‹¿å›äº†é’±ï¼Œè¿˜è¿½åŠ äº†è‚¡ä¸œè´£ä»»ï¼Œç”šè‡³è¿˜æœ‰ä½™åŠ›å»åƒé¡¿å¥½çš„åº†ç¥ä¸€ä¸‹ã€‚ä½ ç”¨è¡ŒåŠ¨è¯æ˜äº†æ³•å¾‹çš„å°Šä¸¥ï¼Œä½ æ˜¯ç»´æƒç•Œçš„æ•™ç§‘ä¹¦ï¼";
                        icon = "ğŸ‘‘";
                        tip = "ä½ çš„æ³•å¾‹ç´ å…»æé«˜ã€‚å–„ç”¨æ³•å¾‹æ­¦å™¨ï¼Œä¸ä»…ä¿æŠ¤äº†è‡ªå·±ï¼Œä¹Ÿæƒ©ç½šäº†æ¶äººã€‚";
                    } else {
                        rank = "ç§°å·ï¼šéä½“é³ä¼¤çš„èµ¢å®¶";
                        desc = "ä½ èµ¢äº†ï¼Œè€æ¿èµ”é’±äº†ã€‚ä½†çœ‹ç€é•œå­é‡Œæ†”æ‚´çš„è‡ªå·±ï¼Œä½ è§‰å¾—è¿™ç¬”é’±æ‹¿å¾—å¤ªè¾›è‹¦ã€‚ä¸ºäº†å‡ åƒå—ï¼Œä½ è€—è´¹äº†åŠå¹´çš„å¿ƒè¡€ï¼Œèµ¢äº†å®˜å¸ï¼Œè¾“äº†ç”Ÿæ´»ã€‚";
                        icon = "ğŸ¥€";
                        tip = "è™½ç„¶ç»“æœæ˜¯å¥½çš„ï¼Œä½†è¿‡é«˜çš„ç»´æƒæˆæœ¬å€¼å¾—åæ€ã€‚æœ‰æ—¶å€™ï¼Œé€‰æ‹©é›†ä½“è¯‰è®¼æˆ–è¡Œæ”¿æŠ•è¯‰åˆ†æ‘Šæˆæœ¬ä¼šæ›´å¥½ã€‚";
                    }
                } else if (score >= 4 || evidence >= 50) {
                    rank = "ç§°å·ï¼šç†æ€§çš„æ­¢æŸè€…";
                    desc = "ä½ æ‹¿å›äº†ä¸€éƒ¨åˆ†é’±ï¼ˆæˆ–è€…æ˜¯è¾¾æˆäº†å’Œè§£ï¼‰ã€‚è™½ç„¶ä¸å®Œç¾ï¼Œä½†åœ¨è€æ¿è·‘è·¯çš„æƒ…å†µä¸‹ï¼Œèƒ½æŒ½å›æŸå¤±å·²ç»è¶…è¿‡äº† 90% çš„äººã€‚ä½ åšåˆ°äº†æè‡´çš„æ€§ä»·æ¯”ã€‚";
                    icon = "ğŸ’°";
                    tip = "æ¥å—ä¸å®Œç¾çš„ç»“æœä¹Ÿæ˜¯ä¸€ç§èƒœåˆ©ã€‚åœ¨â€œä¸€åˆ†é’±æ‹¿ä¸åˆ°â€å’Œâ€œæ‹¿å›ä¸€åŠâ€ä¹‹é—´ï¼Œä½ åšäº†ç†æ€§çš„é€‰æ‹©ã€‚";
                } else {
                    rank = "ç§°å·ï¼šè¢«é—å¿˜çš„å—å®³è€…";
                    desc = "ä½ å°è¯•äº†ï¼Œä½†æ–¹å‘é”™äº†ã€‚ç›²ç›®é—¹äº‹ã€è½»ä¿¡è°£è¨€è®©ä½ åœ¨é”™è¯¯çš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼Œæœ€åé’±æ²¡æ‹¿å›ï¼Œè¿˜æƒ¹äº†ä¸€èº«éº»çƒ¦ã€‚ä½ çš„å£°éŸ³æ·¹æ²¡åœ¨å–§åš£ä¸­ã€‚";
                    icon = "ğŸ’¸";
                    tip = "ä¸è¦ç”¨è¿æ³•æ‰‹æ®µå»ç»´æƒï¼Œé‚£æ ·åªä¼šè®©è‡ªå·±ä»å—å®³è€…å˜æˆæ–½å®³è€…ã€‚";
                }

                this.elements.endingRank.textContent = rank;
                this.elements.endingDesc.textContent = desc;
                this.elements.endingIcon.textContent = icon;
                this.elements.endingTip.textContent = tip;
            },

            reset() {
                this.start();
            },

            switchScreen(screenName) {
                Object.values(this.elements).forEach(el => {
                    if (el && el.classList && el.classList.contains('screen')) {
                        el.classList.remove('active');
                    }
                });
                this.elements[screenName].classList.add('active');
            }
        };
    </script>
</body>
</html>